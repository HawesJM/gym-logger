{% extends "base.html" %}
{% block content %}

<div class="row">
    <div id="profile-header" class="col-sm-12 col-md-6">
        <h3 id="profile-name" class="light-blue-text text-darken-4">
            {{ username }}'s Profile
        </h3>
    </div>


    <section>
        <!-- flash messages -->
        {% with messages = get_flashed_messages() %} {% if messages %}
        {% if message == "Workout successfully logged!" %}
        <div class="row flashes">
            <h4 class="light-blue lighten-4 center-align">{{ message }}</h4>
        </div>
        {% endif %}
        {% if message == "Workout successfully deleted!" %}
        <div class="row flashes">
            <h4 class="light-blue lighten-4 center-align">{{ message }}</h4>
        </div>
        {% endif %}
        {% endif %} {% endwith %}
    </section>

</div>

<!-- displays user recorded workouts -->

<div id="recorded-workouts" class="row col-sm-12 col-md-6">
    <div class="row shadow-lg p-3 bg-white rounded">
        <h4>
            My recorded workouts
        </h4>
        {% for workout in workouts %}
        {% if workout.created_by|lower == session.user|lower %}
            <div class="col-md-4 logged-collapse-container">
              <button id="logged-workout-collapse-button" class="col-md-12 logged-collapse-button" type="button" data-bs-toggle="collapse" data-bs-target="#{{workout.workout_container_description}}"
                aria-expanded="false" aria-controls="{{workout.workout_container_description}}">
                <div id="profile-description-span">
                    <span>{{workout.workout_description}}<br>{{workout.date}}<br><i class="fa-regular fa-square-caret-down"></i></span>
                </div>
                </button>
                <div class="collapse" id="{{workout.workout_container_description}}">
                    {% if workout.created_by|lower == session.user|lower %}
                    {% if workout.category == "cardio" %}
                    <img class="card-head col-md-12" src="/static/images/cardio-card-header.jpg">
                    {% elif workout.category == "resistance" %}
                    <img class="card-head col-md-12" src="/static/images/resistance-card-header.jpg">
                    {% elif workout.category == "weights" %}
                    <img class="card-head col-md-12" src="/static/images/weights-card-header.jpg">
                    {% else %}
                    <img class="card-head col-md-12" src="/static/images/general-workout-card-header.jpg">
                    {% endif %}
                    {% endif %}
                    <div class="card-body">
                        <p>{{ workout.date }}</p>
                        <a href="{{ url_for('workout_details', workout_id=workout._id) }}">{{
                            workout.workout_description
                            }}</a>
                        <div id="profile-button-row" class="row">
                            <div class="col-sm-6 col-md-6">
                                <a href={{ url_for('delete_workout', workout_id=workout._id) }}
                                    class="btn btn-danger"><i class="fa-solid fa-trash-can"></i> Delete</a>
                            </div>
                            <div class="col-sm-6 col-md-6">
                                <a href={{ url_for('edit_workout', workout_id=workout._id) }}
                                    class="btn btn-primary"><i class="fa-regular fa-pen-to-square"></i>Edit</a>
                            </div>
                        </div>
                </div>
            </div>
        </div>
        {% endif %}
        {% endfor %}
    </div>
    </div>
</div>


<!-- displays user saved workouts -->

<div id="saved-workouts" class="row col-sm-12 col-md-6">
    <div class="row shadow-lg bg-white rounded workouts-collapsible">
        <h4>
            My saved workouts
        </h4>
        {% for workout in workouts %}
        {% if workout.workout_description %}
        {% if session.user|lower in workout.saved_by %}
            <div class="col-md-4 saved-collapse-container">
              <button id="saved-workout-collapse-button" class="col-md-12 logged-collapse-button" type="button" data-bs-toggle="collapse" data-bs-target="#{{workout.workout_container_description}}"
                aria-expanded="false" aria-controls="{{workout.workout_container_description}}">
                <div id="profile-description-span">
                    <span>{{workout.workout_description}}<br>{{workout.date}}<br><i class="fa-regular fa-square-caret-down"></i></span>
                </div>
                </button>
                <div class="collapse" id="{{workout.workout_container_description}}">
                    {% if workout.created_by|lower == session.user|lower %}
                    {% if workout.category == "cardio" %}
                    <img class="card-head col-md-12" src="/static/images/cardio-card-header.jpg">
                    {% elif workout.category == "resistance" %}
                    <img class="card-head col-md-12" src="/static/images/resistance-card-header.jpg">
                    {% elif workout.category == "weights" %}
                    <img class="card-head col-md-12" src="/static/images/weights-card-header.jpg">
                    {% else %}
                    <img class="card-head col-md-12" src="/static/images/general-workout-card-header.jpg">
                    {% endif %}
                    {% endif %}
                    <div class="card-body">
                        <p>{{ workout.date }}</p>
                        <a href="{{ url_for('workout_details', workout_id=workout._id) }}">{{
                            workout.workout_description
                            }}</a>
                        <div id="profile-button-row" class="row">
                            <div class="col-sm-6 col-md-6">
                                <a href={{ url_for('delete_workout', workout_id=workout._id) }}
                                    class="btn btn-danger"><i class="fa-solid fa-trash-can"></i> Delete</a>
                            </div>
                            <div class="col-sm-6 col-md-6">
                                <a href={{ url_for('edit_workout', workout_id=workout._id) }}
                                    class="btn btn-primary"><i class="fa-regular fa-pen-to-square"></i>Edit</a>
                            </div>
                        </div>
                </div>
            </div>
        </div>
        {% endif %}
        {% endif %}
        {% endfor %}
    </div>
    </div>
</div>


<div id="workout-plans" class="row col-sm-12 col-md-6">
    <div class="row shadow-lg p-3 mb-5 bg-white rounded workouts-collapsible">
        <h4>
            My workout plans
        </h4>
        <div class="card-body col-md-4">
            plan 1
        </div>
        <div class="card-body col-md-4">
            plan 2
        </div>
        <div class="card-body col-md-4">
            plan 3
        </div>
    </div>
</div>

{% endblock %}